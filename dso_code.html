<!DOCTYPE html>
<html>
<head>
	<title>Don Tilakumara</title>
	<link rel="stylesheet" type="text/css" href="style.css"/>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
</head>
<body>
	<div id="commonsection">
        
    </div>

        
	<div>
        <h2 class="main-body-header card">Digital Oscilloscope Schematics</h2>
    </div>

	<div class="main-body">
		
		<p class="main-body-paragraph"></p>
		<p class="main-body-paragraph">Code Snippet of the DSO</p>

	<pre class="prettyprint">
        uint32_t butlight_service_on_off_char_add(ble_bts_t * p_butlight_service)
        {
            uint32_t err_code;

            ble_uuid_t on_off_char_uuid;

            ble_uuid128_t base_uuid = BLE_UUID_BUTLIGHT_BASE_UUID;
          
            on_off_char_uuid.uuid = BLE_UUID_BUTLIGHT_ON_OFF_CHAR;
          
            //Register 128 UUIDs with vendor specific table 
            err_code = sd_ble_uuid_vs_add(&base_uuid, &on_off_char_uuid.type);
            APP_ERROR_CHECK(err_code);

            //Configuring Attribute Metadata (including where to store the characteristic)
            ble_gatts_attr_md_t         attr_md;

            memset(&attr_md, 0, sizeof(attr_md));
            attr_md.vloc = BLE_GATTS_VLOC_STACK;

            //Configuring the Characteristic Value Attribute
            ble_gatts_attr_t            attr_char_value;

            memset(&attr_char_value, 0, sizeof(attr_char_value));
            attr_char_value.p_uuid = &on_off_char_uuid;
            attr_char_value.p_attr_md = &attr_md;

            attr_char_value.max_len = 3;
            attr_char_value.init_len= 3;
            //uint8_t value[4] = {0x01, 0x02, 0x03, 0x04};
            attr_char_value.p_value = m_on_off_data;

            //Configure Characteristic Metadata and its read write properties
            ble_gatts_char_md_t         char_md;

            memset(&char_md, 0, sizeof(char_md));
            char_md.char_props.read = 1;
            char_md.char_props.write = 1;

            //Set read write permissions
            BLE_GAP_CONN_SEC_MODE_SET_ENC_WITH_MITM(&attr_md.read_perm);
            BLE_GAP_CONN_SEC_MODE_SET_ENC_WITH_MITM(&attr_md.write_perm);

            //Configuring CCCD (Client Characteristic Configuration Descriptor) for notifications
            /*ble_gatts_attr_md_t       cccd_md;
            memset(&cccd_md, 0, sizeof(cccd_md));
            BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM(&cccd_md.read_perm);
            BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM(&cccd_md.write_perm);

            cccd_md.vloc  = BLE_GATTS_VLOC_STACK;
            char_md.p_cccd_md = &cccd_md;
            char_md.char_props.notify = 0;

            */
            err_code = sd_ble_gatts_characteristic_add(p_butlight_service->service_handle, &char_md, &attr_char_value, &p_butlight_service->on_off_handle);

            APP_ERROR_CHECK(err_code);
          
        }    
    </pre>

	</div>
	
    <script>
        $( "#commonsection" ).load( "template.html" );
    </script>

	<!-- <script type="text/javascript">
		var myElement = document.getElementById.('id-side-bar');
		var offSetWidthSideBar = myElement.offsetWidth;
		
	</script> -->
	<!-- <script>
		var myElement = document.getElementById('xyz');
		myElement.addEventListener('mouseenter', function () {
			myElement.style.color = 'green';
			var position = 0;
			setInterval(() => {
				position += 2;
				myElement.style.padding = position + 'px';
			}, 10)
		});
		myElement.addEventListener('mouseexit', function () {

		});
	</script> -->
</body>
</html>